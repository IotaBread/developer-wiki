<!doctype html>
<html lang="en-us">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Recipes</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/default.min.css">
    <link rel="stylesheet" href="https://quiltmc.org/assets/css/style.css">
    <link rel="stylesheet" href="https://modder.wiki.quiltmc.org/dracula.css">

    <link rel="icon" type="image/png" sizes="32x32" href="https://quiltmc.org/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://quiltmc.org/favicon/favicon-16x16.png">
    <link rel="shortcut icon" href="https://quiltmc.org/favicon/favicon.ico">
    <link rel="canonical" href="https://modder.wiki.quiltmc.org/versions/1.19/data/recipes"/>

    <meta property="og:title" content="Recipes"/>
    <meta name="author" content="QuiltMC"/>
    <meta property="og:locale" content="en_US"/>
    <meta name="description" content="Recipes are a data-driven Minecraft system that allows for matching between inventories and item inputs, resulting in outputs."/>
    <meta property="og:description" content="Recipes are a data-driven Minecraft system that allows for matching between inventories and item inputs, resulting in outputs."/>
    <meta property="og:url" content="https://modder.wiki.quiltmc.org/versions/1.19/data/recipes"/>
    <meta property="og:site_name" content="Recipes"/>
    <meta property="og:image" content="https://quiltmc.org/assets/img/logo-square.png"/>
    <meta name="twitter:card" content="summary"/>
    <meta property="twitter:image" content="https://quiltmc.org/assets/img/logo-square.png"/>
    <meta property="twitter:title" content="Recipes"/>
    <meta name="twitter:site" content="@quilt_mc"/>
    <meta name="twitter:creator" content="@QuiltMC"/>

    <script src="https://kit.fontawesome.com/b1b70f724e.js" crossorigin="anonymous"></script>
    <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>

    <script>hljs.highlightAll();</script>

    <style>
        .site-warning {
            background-color: #ff6f6f;
            color: white;
            padding: 1em;
        }

        .site-warning a {
            color: #000000;
        }

        .site-warning a:hover {
            color: #555;
        }

        @media (prefers-color-scheme: dark) {
            .site-warning {
                background-color: #c40000;
                color: white;
                padding: 1em;
            }

            .site-warning a {
                color: #000;
            }

            .site-warning a:hover {
                color: #555;
            }
        }
    </style>
</head>

<body>

<nav class="navbar is-dark" role="navigation" aria-label="main navigation" data-controller="navbar">
    <div class="navbar-brand">
        <a class="navbar-item pr-6" href="/">
            <img src="https://quiltmc.org/assets/img/logo.svg" alt="Quilt Logo">

            <span class="ml-2">DevWiki</span>
        </a>

        <a class="navbar-item px-2 has-tooltip-arrow has-tooltip-bottom" id="theme-switcher" data-tooltip="Toggle Low Contrast">
            <span id="theme-normal-contrast">
                <i class="fas fa-circle-half-stroke"></i>
            </span>

            <span id="theme-low-contrast">
                <i class="fal fa-circle-half-stroke"></i>
            </span>
        </a>

        <a class="navbar-item px-2 has-tooltip-arrow has-tooltip-bottom" href="https://quiltmc.org/" data-tooltip="Website Home">
            <span><i class="fas fa-home"></i></span>
        </a>

        <a role="button" data-navbar-target="menu" data-action="click->navbar#toggle" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div class="navbar-menu" data-navbar-target="menu">
        <div class="navbar-end">
            <div class="navbar-item has-dropdown is-hoverable">
                <a href="/versions/" class="navbar-link is-arrowless ">
                    Versions
                </a>

                <div class="navbar-dropdown is-boxed">
                    <a href="https://modder.wiki.quiltmc.org/versions/1.19/" class = "navbar-item"> <span>Minecraft Version 1.19</span></a>                </div>
            </div>


            <div class="navbar-item has-dropdown is-hoverable">
                <a href="/libraries/" class="navbar-link is-arrowless ">
                    Libraries
                </a>

                <div class="navbar-dropdown is-boxed">
                        <a href="https://modder.wiki.quiltmc.org/libraries/brigadier/" class = "navbar-item"> <span>Brigadier</span></a>                </div>
            </div>

            <a href="https://github.com/QuiltMC/developer-wiki/tree/main" class="navbar-item has-icon" target="_blank">
                <span class="icon"><i class="fab fa-github"></i></span>
                <span class="is-hidden-desktop">GitHub</span>
            </a>
        </div>
    </div>
</nav>

<article class="message is-danger mx-3 mt-3 mb-0">
    <div class="message-body has-text-centered">
        <h1>
            Notice: This website is still under development. Please report any issues at
            <a href="https://github.com/QuiltMC/developer-wiki">https://github.com/QuiltMC/developer-wiki</a>
        </h1>
    </div>
</article>

<main class="container">
    <section class="section">
        <div class="columns">
    <div class="column is-narrow" data-controller="sidebar">
        <div class="is-hidden-tablet">
            <button data-action="click->sidebar#toggle" class="button is-primary">
                <span class="icon"><i class="fas fa-ellipsis-h"></i></span>
                <span>Menu</span>
            </button>

            <br/>
            <br/>
        </div>

        <div class="box is-hidden-mobile is-sticky" data-sidebar-target="sidebar">
            <div class="menu">
                <ul class="menu-list">
                        <li><a href="https://modder.wiki.quiltmc.org/versions/1.19/">Minecraft Version 1.19</a></li>
    <li><a href="https://modder.wiki.quiltmc.org/versions/1.19/data/">Data</a>
        <ul>
            <li><a href="https://modder.wiki.quiltmc.org/versions/1.19/data/recipes/">Recipes</a>
                <ul>
                    <li><a href="https://modder.wiki.quiltmc.org/versions/1.19/data/recipes/recipe_api/">Recipe API</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="https://modder.wiki.quiltmc.org/versions/1.19/entity/">Entities</a>
        <ul>
            <li><a href="https://modder.wiki.quiltmc.org/versions/1.19/entity/entity_attributes/">Entity Attributes</a></li>
        </ul>
    </li>
</ul>
                </ul>
            </div>
        </div>
    </div>

    <div class="content column">
        <h1><a href="#recipes" id="recipes">Recipes</a></h1>
<p>Recipes are a data-driven Minecraft system that allows for matching between inventories and item inputs, resulting in outputs.</p>
<h2><a href="#concepts" id="concepts">Concepts</a></h2>
<ul>
    <li><code>Recipe</code> - Specifies the behavior and logic of a recipe - its inputs, outputs and matching.</li>
    <li><code>RecipeType</code> - Represents a group of recipes.</li>
    <li><code>RecipeSerializer</code> - Deserialization of JSON files to a recipe object, and serialization and deserialization of a recipe to a packet.</li>
</ul>
<h2><a href="#creating-a-simple-recipe" id="creating-a-simple-recipe">Creating a simple recipe</a></h2>
<p>To start to create a recipe, create a class that implements the <code>Recipe</code> interface, the generic type of it represents the kind of <code>Inventory</code> where this recipe will work.</p>
<!--- TODO: Refer to Inventory/BlockEntity tutorial -->
<p>The conventional way of specifying inputs and output, is to utilize <code>Ingredient</code> and <code>ItemStack</code> respectively - <code>Ingredient</code> is a generalized object that can match against stacks being backed by either a stack or tags. <!--- TODO: Link to Tags page --></p>
<p>You should also store the recipe identifier for identification and filling values.</p>
<p>From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/MyRecipe.java" target="_blank"><code>MyRecipe.java</code></a>:</p>
<pre><code class="language-java">// ...
	private final Identifier id;
	private final Ingredient input;
	private final ItemStack output;

	public MyRecipe(Identifier id, Ingredient input, ItemStack output) {
		this.id = id;
		this.input = input;
		this.output = output;
	}

	@Override
	public Identifier getId() {
		return this.id;
	}
// ...
</code></pre>
<h3><a href="#matching" id="matching">Matching</a></h3>
<p>The method <code>matches</code> returns whether this current recipe should be matched when retrieved via the <code>RecipeManager</code> - Match the inventory contents against the inputs here.</p>
<p>From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/MyRecipe.java" target="_blank"><code>MyRecipe.java</code></a>:</p>
<pre><code class="language-java">// ...
	@Override
	public boolean matches(Inventory inventory, World world) {
		return this.input.test(inventory.getStack(0));
	}
// ...
</code></pre>
<h3><a href="#outputs" id="outputs">Outputs</a></h3>
<p>Outputting has two parts, <code>getOutput</code> and <code>craft</code>, the first being a view of the output and the latter being a copy of the output that may be modified.</p>
<p>From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/MyRecipe.java" target="_blank"><code>MyRecipe.java</code></a>:</p>
<pre><code class="language-java">// ...
	@Override
	public ItemStack getOutput() {
		return this.output;
	}

	@Override
	public ItemStack craft(Inventory inventory) {
		return this.output.copy();
	}
// ...
</code></pre>
<h3><a href="#serializer" id="serializer">Serializer</a></h3>
<p>To start to create a serializer, create a class that implements <code>QuiltRecipeSerializer</code> (<em>An extended version of <code>RecipeSerializer</code> that allows for serialization of recipe objects into JSON</em>).</p>
<h4><a href="#json" id="json">JSON</a></h4>
<p>In <code>read</code> you must read the JSON object and convert it into a new recipe object of your type.</p>
<p>In <code>toJson</code> you must convert the recipe object into a valid equivalent JSON object - You can check if it's being serialized correctly via dumping the recipes with the <code>quilt.recipe.dump</code> property (<code>-Dquilt.recipe.dump=true</code> in the VM options) and checking the outputted recipes.</p>
<p>From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/MyRecipe.java" target="_blank"><code>MyRecipe.java</code></a>:</p>
<pre><code class="language-java">// ...
		@Override
		public MyRecipe read(Identifier id, JsonObject json) {
			// Gets the object specified by the &quot;input&quot; key
			var inputObject = json.getAsJsonObject(&quot;input&quot;);
			// Helper method to read Ingredient from JsonElement
			var input = Ingredient.fromJson(inputObject);
			// Gets the string in the &quot;output&quot; key
			var outputIdentifier = json.get(&quot;output&quot;).getAsString();
			// Gets the integer in the &quot;count&quot; key, fallbacking to 1 if it does not exist
			var count = JsonHelper.getInt(json, &quot;count&quot;, 1);
			// Attempts to get the item in &quot;output&quot; with the registry and creates a stack with it
			var output = new ItemStack(Registry.ITEM.getOrEmpty(new Identifier(outputIdentifier))
					.orElseThrow(() -&gt; new IllegalStateException(&quot;Item &quot; + outputIdentifier + &quot; does not exist&quot;)), count);

			return new MyRecipe(id, input, output);
		}

		@Override
		public JsonObject toJson(MyRecipe recipe) {
			var obj = new JsonObject();
			// Puts the serialized ingredient json element into the &quot;input&quot; key
			obj.add(&quot;input&quot;, recipe.input.toJson());
			// Checks if the output count is higher than the default, and if it is, adds into the &quot;count&quot; key
			if (recipe.output.getCount() &gt; 1) {
				obj.addProperty(&quot;count&quot;, recipe.output.getCount());
			}
			// Gets the output identifier from the registry and adds it into the &quot;output&quot; key
			obj.addProperty(&quot;output&quot;, Registry.ITEM.getId(recipe.output.getItem()).toString());

			return obj;
		}
// ...
</code></pre>
<h4><a href="#packet" id="packet">Packet</a></h4>
<p>You must create and read recipe packets, so the server is able to send the recipes to the clients, and be converted correctly, failing to implement the packet reading and writing might result in desyncs.</p>
<p>It is imperative that you read values in the same order that you wrote them.</p>
<p>From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/MyRecipe.java" target="_blank"><code>MyRecipe.java</code></a>:</p>
<pre><code class="language-java">// ...
		@Override
		public MyRecipe read(Identifier id, PacketByteBuf buf) {
			var input = Ingredient.fromPacket(buf);
			var output = buf.readItemStack();

			return new MyRecipe(id, input, output);
		}

		@Override
		public void write(PacketByteBuf buf, MyRecipe recipe) {
			recipe.input.write(buf);
			buf.writeItemStack(recipe.output);
		}
// ...
</code></pre>
<h3><a href="#recipe-type" id="recipe-type">Recipe Type</a></h3>
<p>Creating a recipe type is as simple as instantiating <code>RecipeType</code>, unfortunately it is an interface, so you must subclass it. From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/Recipes.java" target="_blank"><code>Recipes.java</code></a>:</p>
<pre><code class="language-java">// ...
	public static final RecipeType&lt;MyRecipe&gt; MY_RECIPE = new RecipeType&lt;&gt;() {}; // Subclasses it anonymously
// ...
</code></pre>
<h3><a href="#registration" id="registration">Registration</a></h3>
<p>You must register your serializer and your type, so Minecraft knows about them. From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/Recipes.java" target="_blank"><code>Recipes.java</code></a>:</p>
<pre><code class="language-java">// ...
		Registry.register(Registry.RECIPE_TYPE, new Identifier(&quot;example&quot;, &quot;my_recipe&quot;), MY_RECIPE);
		Registry.register(Registry.RECIPE_SERIALIZER, new Identifier(&quot;example&quot;, &quot;my_recipe&quot;), MY_RECIPE_SERIALIZER);
// ...
</code></pre>
<p>Additionally, you also have to specify them in your recipe class. From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/java/org/quiltmc/wiki/recipes/MyRecipe.java" target="_blank"><code>MyRecipe.java</code></a>:</p>
<pre><code class="language-java">// ...
	@Override
	public RecipeSerializer&lt;?&gt; getSerializer() {
		return Recipes.MY_RECIPE_SERIALIZER;
	}

	@Override
	public RecipeType&lt;?&gt; getType() {
		return Recipes.MY_RECIPE;
	}
// ...
</code></pre>
<h3><a href="#using-your-recipe" id="using-your-recipe">Using your recipe</a></h3>
<h4><a href="#creating-recipe-json-files" id="creating-recipe-json-files">Creating recipe JSON files</a></h4>
<p>Now that you have created and registered your recipe, it's time to make a few recipes.</p>
<p>Recipes should be located inside <code>resources/data/[namespace]/recipes</code>; its id will be composed of the namespace to which it was added, and the file path with its file name.</p>
<p>All recipes have different structures, the only common denominator between all of them is the field <code>&quot;type&quot;</code>, which specifies the identifier of the recipe type - so in our case, <code>&quot;example:my_recipe&quot;</code>; The remaining values are dependent on the serializer.</p>
<p>For instance, a recipe of ours that inputs an iron ingot and outputs two apples would be: From <a href="https://github.com/QuiltMC/developer-wiki/tree/main/wiki/versions/1.19/data/recipes/src/main/resources/data/recipes/recipes/fun.json" target="_blank"><code>fun.json</code></a>:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;example:my_recipe&quot;,
  &quot;input&quot;: {
    &quot;item&quot;: &quot;minecraft:iron_ingot&quot;
  },
  &quot;output&quot;: &quot;minecraft:apple&quot;,
  &quot;count&quot;: 2
}
</code></pre>
<h4><a href="#retrieving-your-recipes" id="retrieving-your-recipes">Retrieving your recipes</a></h4>
<p>Recipes must be retrieved from the <code>RecipeManager</code>, which can be fetched from either a <code>World</code> or the <code>MinecraftServer</code>. The recipe manager has a few methods for recipe retrieving, such as:</p>
<ul>
    <li><code>getFirstMatch</code> - Gets the first recipe of a type that returned <code>true</code> for <code>matches</code>.</li>
    <li><code>listAllOfType</code> - Gets all recipes from a type.</li>
    <li><code>getAllMatches</code> - Gets all recipes of a type that returned <code>true</code> for <code>matches</code>.</li>
</ul>
<p>The methods that get matching recipes require you to pass an inventory that matches the specified in the recipe generic.</p>
    </div>
</div>
    </section>
</main>

<footer class="footer">
    <div class="content">
        <div class="columns">
            <div class="column is-half is-offset-one-quarter">
                <div class="button-grid">
                    <a title="Discord" class="button is-discord is-rounded" target="_blank"
                       href="">
                        <span class="icon"><i class="fab fa-discord"></i></span>
                    </a>

                    <a title="Forum" class="button is-gradle is-rounded"
                       target="_blank"
                       href="https://forum.quiltmc.org">
                        <span class="icon"><i class="fab fa-discourse"></i></span>
                    </a>

                    <a title="GitHub" class="button is-github is-rounded"
                       target="_blank"
                       href="https://github.com/">
                        <span class="icon"><i class="fab fa-github"></i></span>
                    </a>

                    <a title="Twitter" class="button is-twitter is-rounded"
                       target="_blank"
                       href="https://twitter.com/">
                        <span class="icon"><i class="fab fa-twitter"></i></span>
                    </a>

                    <a title="Mastodon" class="button is-mastodon is-rounded"
                       target="_blank"
                       rel="me"
                       href="https://tech.lgbt/@quiltmc">
                        <span class="icon"><i class="fab fa-mastodon"></i></span>
                    </a>

                    <a title="Twitch" class="button is-primary is-rounded" target="_blank"
                       href="https://twitch.tv/">
                        <span class="icon"><i class="fab fa-twitch"></i></span>
                    </a>

                    <a title="RSS" class="button is-rss is-rounded" target="_blank"
                       href="https://quiltmc.org/feed.xml">
                        <span class="icon"><i class="fa-solid fa-rss"></i></span>
                    </a>
                </div>

                <br/>

                <div class="has-text-centered">
                    <p>
                        <strong>Copyright &copy; 2022 Quilt Project</strong>
                    </p>

                    <p>
                        Quilt is not an official Minecraft product, and is not
                        approved by or associated with Mojang Studios.
                        "Minecraft" is a trademark of Mojang AB and any usage
                        of the Minecraft brand on this site is used in
                        accordance with Mojang Studios'
                        <a href="https://account.mojang.com/terms?ref=ft#brand" target="_blank">Brand and Asset
                            Guidelines</a>.
                    </p>

                    <p>
                        All logos used on this site are the property of their respective owners. The
                        CurseForge logo recreation we use in a few places on this site
                        <a href="https://gist.github.com/thecodewarrior/110057b210551c4ecf2c9be6d58ff824"
                           target="_blank">was
                            created by thecodewarrior</a>.
                    </p>

                    <p>
                        Made with <i class="fak fa-2xl fa-pumpkin"></i>, <a href="https://bulma.io">Bulma</a> and
                        <a href="https://github.com/CreativeBulma">the CreativeBulma extensions</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="https://quiltmc.org/assets/js/bundle.js"></script>

</body>
</html>
